{% comment %}
Usage:
In the page front matter:

grid_projects:
- darksky
- train-game
- tainted-grail

Then include:
{% include project_grid.html %}
{% endcomment %}

<style>
    .project-grid {
        display: grid;
        position: relative;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 1rem;
    }

    .filter-buttons {
        display: flex;
        gap: 0.5rem;
        margin-bottom: 1rem;
    }

    .filter-btn {
        padding: 0.5rem 1rem;
        border: none;
        border-radius: 6px;
        cursor: pointer;
        background: #ddd;
        transition: background 0.2s;
    }

    .filter-btn.active {
        background: #333;
        color: #fff;
    }
</style>

<div class="filter-buttons">
    <button class="filter-btn active" data-filter="*">All</button>
    <button class="filter-btn" data-filter=".professional">Professional Projects</button>
    <button class="filter-btn" data-filter=".personal">Personal Projects</button>
    <button class="filter-btn" data-filter=".game">Games</button>
    <button class="filter-btn" data-filter=".tool">Tools</button>
    <button class="filter-btn" data-filter=".unity">Unity</button>
    <button class="filter-btn" data-filter=".vfx">Shaders & Visual Effects</button>
</div>

<div class="project-grid">
    {% for slug in page.grid_projects %}
    {% assign p = site.projects | where: "slug", slug | first %}
    {% if p %}
    {% assign tags = p.tags | join: ' ' %}
    <div class="project-grid-wrapper {{ p.tags | join: ' ' }}" data-category="{{ p.tags | join: ' ' }}">
        {% include project_rect.html project=slug %}
    </div>
    {% endif %}
    {% endfor %}
</div>

<script>
    var grid = document.querySelector('.project-grid');
    var iso = new Isotope(grid, {
        itemSelector: '.project-grid-wrapper',
        layoutMode: 'fitRows',
        fitRows: {
            gutter: 10,
            horizontalOrder: true
        }
    });

    var filtersElem = document.querySelector('.filter-buttons');

    filtersElem.addEventListener('click', function (event) {

        if (!event.target.matches('button')) return;

        // update active class
        filtersElem.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('active'));
        event.target.classList.add('active');

        var filterValue = event.target.getAttribute('data-filter');
        iso.arrange({ filter: filterValue });
    });
</script>