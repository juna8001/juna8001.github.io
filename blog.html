---
layout: default
title: "Blog"
permalink: /blog/
---

<h1>Blog</h1>
<div id="posts"></div>

<script>
async function loadPosts() {
  try {
    const res = await fetch("/posts.json");
    if (!res.ok) throw new Error("Failed to fetch posts.json");
    const posts = await res.json();

    const container = document.getElementById("posts");
    container.innerHTML = ""; // clear just in case

    posts.forEach(post => {
      const div = document.createElement("div");
      div.className = "post-card";

      div.innerHTML = `
        <h2><a href="${post.url}">${post.title}</a></h2>
        <p>${post.excerpt || ""}</p>
      `;

      if (post.image) {
        const img = document.createElement("img");
        img.src = post.image;
        img.alt = post.title;
        img.loading = "lazy"; // load only when visible
        div.prepend(img);
      }

      container.appendChild(div);
    });
  } catch (err) {
    console.error("Error loading posts:", err);
    document.getElementById("posts").innerHTML = "<p>Could not load posts.</p>";
  }
}

loadPosts();
</script>
