---
layout: default
title: "Blog"
permalink: /blog/
---

<h1>Blog</h1>
<div id="posts"></div>

<!-- Template for each post -->
<template id="post-template">
  <a class="post-card" href="#">
    <div class="post-image-container">
      <img class="post-image" alt="">
    </div>
    <div class="post-content">
      <h2 class="post-title"></h2>
      <p class="post-excerpt"></p>
      <p class="post-date"></p>
    </div>
    </div>
</template>

<script>
  async function loadPosts() {
    try {
      const res = await fetch("/posts.json");
      if (!res.ok) throw new Error("Failed to fetch posts.json");
      const posts = await res.json();

      const container = document.getElementById("posts");
      const template = document.getElementById("post-template");

      posts.forEach(post => {
        const node = template.content.cloneNode(true);
        // URL
        const card = node.querySelector(".post-card");
        card.href = post.url;
        // TITLE
        const title = node.querySelector(".post-title");
        title.textContent = post.title || "";
        // EXCERPT
        const excerpt = node.querySelector(".post-excerpt");
        excerpt.textContent = post.excerpt || "";
        // DATE
        const date = node.querySelector(".post-date");
        const postDate = new Date(post.date);
        const options = { year: 'numeric', month: 'short', day: 'numeric' };
        const formattedDate = postDate.toLocaleDateString('en-US', options);
        date.textContent = formattedDate || "";
        // IMAGE
        const img = node.querySelector(".post-image");
        if (post.image) {
          img.src = post.image;
          img.alt = post.title;
          img.loading = "lazy";
        } else {
          img.remove();
        }

        container.appendChild(node);
      });
    } catch (err) {
      console.error("Error loading posts:", err);
      document.getElementById("posts").innerHTML = "<p>Could not load posts.</p>";
    }
  }

  loadPosts();
</script>