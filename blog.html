---
layout: default
title: "Blog"
permalink: /blog/
---

<h1>Blog</h1>
<div id="posts"></div>

<!-- Template for each post -->
<template id="post-template">
  <div class="post-card">
    <img class="post-image" alt="">
    <h2><a class="post-link"></a></h2>
    <p class="post-excerpt"></p>
  </div>
</template>

<script>
async function loadPosts() {
  try {
    const res = await fetch("/posts.json");
    if (!res.ok) throw new Error("Failed to fetch posts.json");
    const posts = await res.json();

    const container = document.getElementById("posts");
    const template = document.getElementById("post-template");

    posts.forEach(post => {
      const node = template.content.cloneNode(true);

      const link = node.querySelector(".post-link");
      link.href = post.url;
      link.textContent = post.title;

      const excerpt = node.querySelector(".post-excerpt");
      excerpt.textContent = post.excerpt || "";

      const img = node.querySelector(".post-image");
      if (post.image) {
        img.src = post.image;
        img.alt = post.title;
        img.loading = "lazy";
      } else {
        img.remove();
      }

      container.appendChild(node);
    });
  } catch (err) {
    console.error("Error loading posts:", err);
    document.getElementById("posts").innerHTML = "<p>Could not load posts.</p>";
  }
}

loadPosts();
</script>
